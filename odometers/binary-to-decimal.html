<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <title>Binary to Decimal</title>
  <meta charset="utf-8">

  <!-- edX This script enables communication between iframe and the platform.
       REQUIRED for edX --- DO NOT REMOVE!! -->
   <script src="/static/js/capa/src/jschannel.js"></script>
   <script src="./edx-jsinput.js"></script>

   <script src="./converters.js"></script>
   <script Language="JavaScript">
    // Binary to decimal converter widget

    var decimalValue = 0;
    var binary = "00000";
    var nCorrect = 0;
    var nTries = 0;
    var hintNum = 0;
    var hints = [
	"Write the binary place values above the digits in the number -- 32  16  8  4  2  1.",
	"Sum the values of those places that contain a '1' digit and ignore those that have a '0' digit.",
	"The value in a particular position that contains a '1', is 1 times the place value. For example, 1 times 4 or 1 times 8."
	];

    // Initialize the widget
    function init() {
       decimalValue = Math.round(Math.random() * 64);
       document.getElementById("binary").innerHTML = decToBinary(decimalValue);
    }

    // Give the next hint wrapping around when necessary.
    function hint() {
       document.getElementById("hinttext").innerHTML = "HINT(" + (hintNum+1) + "): " + hints[hintNum];
       hintNum = (hintNum + 1) % hints.length;
    }

    // Check the user's answer
    function check() {
       var answer = document.getElementById("answer").value;
       if (answer == decimalValue) {
	 nCorrect += 1;
	 alert("Correct! That's " + nCorrect + " correct.");
	 nTries = 0;
	 decimalValue = Math.round((Math.random() * 64));
	 document.getElementById("binary").innerHTML = decToBinary(decimalValue);
	 document.getElementById("correct").innerHTML = "Correct: " + nCorrect;
       }
       else {
	 nTries += 1;
	 if (nTries <= 3) {
	    alert(answer + " is incorrect. Number of tries = " + nTries + "\nTry again. ");
	 }
	 else  {
	    alert(answer + " is incorrect. Number of tries = " + nTries + "\nBinary " 
			 + decToBinary(decimalValue) + " is " + decimalValue + " in decimal." + "\nLet's try a new problem. ");
	    nTries = 0;
	    decimalValue = Math.round((Math.random() * 64));
	    document.getElementById("binary").innerHTML = decToBinary(decimalValue);
	 }
       } 
    }
   </script>
</head>
<body onLoad="init()">
  <table width="600" align="center" border="1" frame="box" rules="none">
    <tr>
      <td>
	<table>
	  <tr>
	    <td>
	      <img src="./android_CSP-128px.jpg">
	    </td>
	  </tr><tr>
	    <td align="center">
	      <br><INPUT TYPE="button" STYLE="background-color:magenta" VALUE="Hint" onClick='hint()'>
	    </td>
	  </tr>
	</table>
      </td>
      <td>
	<h3>Converting Binary to Decimal</h3>
	Type your answer in the text field and click the <b><i>Check</i></b> button.
	<br><br><font color="#ff00dd" SIZE="3"><LABEL ID="hinttext"></LABEL></FONT>
	<br><br>
      </td>
    </tr>
    <tr>
      <td colspan="2">
	<FORM onSubmit="" NAME="odometerdemo">
	  <CENTER>
	    <TABLE ALIGN="CENTER" BGCOLOR="#AAAAAA" BORDER="1" CELLPADDING="5">
	      <TR>
		<TD BGCOLOR="#999999" ALIGN="CENTER">
		  <font color="#ffffff" SIZE="5"><LABEL>The current number is: </LABEL></FONT>
		  <font color="#ff0000" SIZE="5"><LABEL id="binary" >00000</LABEL></font>
		  <br><font color="#ffffff" SIZE="5"><LABEL>What is its decimal (base 10) value?</LABEL></font>
		</TD>
	      </TR>
	      <TR>
		<TD>
		  <CENTER>
		    <INPUT TYPE="text" ID="answer" SIZE="6">
		    &nbsp;&nbsp;<INPUT TYPE="button" VALUE="Check" onClick='check()'>
		    &nbsp;&nbsp;&nbsp;&nbsp;<LABEL ID="correct">Correct: 0</LABEL>

		  </CENTER>
		</TD>
	      </TR>
	    </TABLE>
	  </CENTER>
	</FORM>
      </td>
    </tr>
  </table>

</body>
</html>
